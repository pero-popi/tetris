(()=>{"use strict";const t=function(){function t(t,e,o){void 0===e&&(e=!0),void 0===o&&(o=!0),this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!0,this.cancelable=!0,this.timeStamp=new Date,this.propagationStopped=!1,this.defaultPrevented=!1,this.type=t,this.bubbles=e,this.cancelable=o}return t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},t.CAPTURING_PHASE=1,t.AT_TARGET=2,t.BUBBLING_PHASE=3,t.MOUSE_DOWN="mousedown",t.MOUSE_MOVE="mousemove",t.MOUSE_UP="mouseup",t.MOUSE_OUT="mouseout",t.COMPLETE="complete",t.SHOW_END="showend",t.TIMER="timer",t.TIMER_END="timerend",t.RESIZE="resize",t.KEY_DOWN="keydown",t.KEY_UP="keyup",t.DROP_END="dropend",t.LOAD="load",t}(),e=function(){function e(){this.listeners={}}return e.prototype.addEventListener=function(t,e,o){void 0===o&&(o=!1);var n=this.listeners[t+!!o];n||(n=this.listeners[t+!!o]=[]);for(var i=0,r=n.length;i<r;i++)if(n[i]==e)return;n.push(e)},e.prototype.removeEventListener=function(t,e,o){void 0===o&&(o=!1);var n=this.listeners[t+!!o];if(n)for(var i=0,r=n.length;i<r;i++)if(n[i]==e)return void n.splice(i,1)},e.prototype.dispatchEvent=function(e){if(!e)return!1;e.target=this;for(var o=[e.target],n=e.target;n=n.parentNode;)o.unshift(n);e.bubbles&&Array.prototype.push.apply(o,o.slice(0,-1).reverse()),e.eventPhase=t.CAPTURING_PHASE;for(var i=0,r=o.length;i<r;i++){var s=e.currentTarget=o[i],a=s==e.target;a&&(e.eventPhase=t.AT_TARGET);var l=e.eventPhase==t.CAPTURING_PHASE,c=s.listeners[e.type+l];if(c){for(var p=0,h=c.length;p<h;p++)try{c[p].call(s,e)}catch(t){}if(e.propagationStopped)break}a&&e.bubbles&&(e.eventPhase=t.BUBBLING_PHASE)}var u=e.defaultPrevented;return e.eventPhase=0,e.propagationStopped=e.defaultPrevented=!1,!u},e}();var o,n=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const i=function(t){function e(e){var o=t.call(this)||this;return o.node=null,o.parentNode=null,o.alpha=1,e&&(e instanceof HTMLElement?o.readElement(e):o.readElement(document.createElement(e))),o}return n(e,t),e.cloneNode=function(t){return new e(document.cloneNode(t))},e.getElementsByTagName=function(t){for(var o=document.getElementsByTagName(t),n=[],i=0,r=length;i<r;i++)n.push(new e(o[i]));return n},e.getElementById=function(t){return new e(document.getElementById(t))},e.getElementsByName=function(t){for(var o=document.getElementsByName(t),n=[],i=0,r=length;i<r;i++)n.push(new e(o[i]));return n},e.prototype.addEventListener=function(e,o,n){void 0===n&&(n=!1),t.prototype.addEventListener.call(this,e,o,n),this.node&&this.node.addEventListener(e,o,n)},e.prototype.removeEventListener=function(e,o,n){void 0===n&&(n=!1),t.prototype.removeEventListener.call(this,e,o,n),this.node&&this.node.removeEventListener(e,o,n)},e.prototype.cloneNode=function(t){return this.node?new e(this.node.cloneNode(t)):null},e.prototype.getElementsByTagName=function(t){if(!this.node)return[];for(var o=this.node.getElementsByTagName(t),n=[],i=0,r=length;i<r;i++)n.push(new e(o[i]));return n},e.prototype.get=function(t){return this.node?-1==t.indexOf("css.")?this.node[t]:(t=t.substring(4,t.length),this.node.style[t]):""},e.prototype.set=function(t,e){this.node&&(-1!=t.indexOf("css.")?this.node.style[t.substring(4,t.length)]=e:this.node[t]=e)},e.prototype.params=function(t){for(var e in t)this.set(e,t[e])},e.prototype.append=function(t,e){this.node&&(-1!=t.indexOf("css.")?(t=t.substring(4,t.length),this.node.style.setProperty(t,this.node.style.getPropertyValue(t)+e)):this.node.setAttribute(t,this.node.getAttribute(t)+e))},e.prototype.appendChild=function(t){return this.node&&t.node&&this.node.appendChild(t.node),t.parentNode=this,t},e.prototype.removeChild=function(t){if(this.node&&t.node)try{this.node.removeChild(t.node)}catch(t){}return t.parentNode=null,t},e.prototype.replaceChild=function(t,e){return this.node&&t.node&&e.node&&this.node.replaceChild(t.node,e.node),t.parentNode=e.parentNode,e.parentNode=null,e},e.prototype.insertBefore=function(t,e){return e?(this.node&&t.node&&e.node&&this.node.insertBefore(t.node,e.node),t.parentNode=e.parentNode,e.parentNode=t,t):this.appendChild(t)},e.prototype.move=function(t,e){this.params({"css.position":"absolute","css.left":t+"px","css.top":e+"px"})},e.prototype.drawRect=function(t,e,o,n){void 0===n&&(n="auto"),this.params({"css.width":t+"px","css.height":e+"px","css.backgroundColor":o,"css.cursor":n})},e.prototype.getAlpha=function(){return this.alpha},e.prototype.setAlpha=function(t){t>1?t=1:t<0&&(t=0),this.params({"css.opacity":t.toString(),"css.filter":"alpha(opacity="+100*t+")"}),this.alpha=t},e.prototype.readElement=function(t){this.alpha=1,this.node=t,this.node!=document.body&&(this.parentNode=this.node&&this.node.parentNode?new e(this.node.parentNode):null,this.get("css.webkitTapHighlightColor")&&this.set("css.webkitTapHighlightColor","rgba(0, 0, 0, 0)"))},e.prototype.load=function(){},e}(e);var r=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const s=function(e){function o(o){void 0===o&&(o=null);var n=e.call(this)||this;return n.elements=[],n.size=0,n.count=0,n.displayLoaderListener=function(e){n.count++,e.target.removeEventListener(t.COMPLETE,n.displayLoaderListener),n.count==n.size&&(n.size=0,n.count=0,n.dispatchEvent(new t(t.COMPLETE)))},o&&n.addAll(o),n}return r(o,e),o.prototype.load=function(){for(var t=0;t<this.size;t++)this.elements[t].load()},o.prototype.add=function(e){e.addEventListener(t.COMPLETE,this.displayLoaderListener),this.elements.push(e),this.size++},o.prototype.addAll=function(t){for(var e in t)this.add(t[e])},o.prototype.set=function(e){for(var o in this.elements=e,this.size=e.length,this.count=0,e)e[o].addEventListener(t.COMPLETE,this.displayLoaderListener);return this},o}(e);var a=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const l=function(e){function o(o){var n=e.call(this,"img")||this;return n.loadCompleteListener=function(){n.node&&n.node.removeEventListener(t.LOAD,n.loadCompleteListener),n.dispatchEvent(new t(t.COMPLETE))},n.src=o,n.node&&n.node.addEventListener(t.LOAD,n.loadCompleteListener),n}return a(o,e),o.prototype.load=function(){this.node&&this.node.setAttribute("src",this.src)},o}(i);var c=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const p=function(e){function o(o,n){void 0===o&&(o=100),void 0===n&&(n=0);var i=e.call(this)||this;return i.currentCount=0,i.delay=100,i.repeatCount=0,i.timeoutID=0,i.intervalListener=function(){if(i.currentCount++,i.dispatchEvent(new t(t.TIMER)),0!=i.repeatCount&&i.currentCount==i.repeatCount)return i.reset(),void i.dispatchEvent(new t(t.TIMER_END));i.start()},i.delay=o,i.repeatCount=n,i}return c(o,e),o.prototype.start=function(){(0==this.repeatCount||this.currentCount<this.repeatCount)&&(window.clearTimeout(this.timeoutID),this.timeoutID=window.setTimeout(this.intervalListener,this.delay))},o.prototype.stop=function(){window.clearTimeout(this.timeoutID)},o.prototype.reset=function(){window.clearTimeout(this.timeoutID),this.currentCount=0},o.prototype.set=function(t,e){return void 0===t&&(t=100),void 0===e&&(e=0),this.reset(),this.delay=t,this.repeatCount=e,this},o}(e),h=function(){function t(){}return t.prototype.getX=function(t){var e=t.get("css.left");return parseFloat(e.substring(0,e.length-2))},t.prototype.getY=function(t){var e=t.get("css.top");return parseFloat(e.substring(0,e.length-2))},t.prototype.getWidth=function(t){var e=t.get("css.width");return parseFloat(e.substring(0,e.length-2))},t.prototype.getHeight=function(t){var e=t.get("css.height");return parseFloat(e.substring(0,e.length-2))},t.prototype.getRect=function(t){return{x:this.getX(t),y:this.getY(t),width:this.getWidth(t),height:this.getHeight(t)}},t.prototype.hitTest=function(t,e){var o=this.getRect(t),n=this.getRect(e);return!(o.x<n.x&&n.x-o.x>=o.width||o.x>n.x&&o.x-n.x>=n.width||o.y<n.y&&n.y-o.y>=o.height||o.y>n.y&&o.y-n.y>=n.height)},t}();var u=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const d=function(t){function e(o,n){var i=t.call(this,e.colors[o])||this;return i.parentTetrimino=null,i.drawRect(20,20,"#FFFFFF"),i.move(0,0),n&&(i.parentTetrimino=n),i}return u(e,t),e.prototype.getX=function(){return e.rectangle.getX(this)},e.prototype.getY=function(){return e.rectangle.getY(this)},e.prototype.getRect=function(){return e.rectangle.getRect(this)},e.prototype.getFieldX=function(){return e.rectangle.getX(this)+(this.parentTetrimino?this.parentTetrimino.getX():0)},e.prototype.getFieldY=function(){return e.rectangle.getY(this)+(this.parentTetrimino?this.parentTetrimino.getY():0)},e.prototype.getFieldRect=function(){return e.rectObject.x=this.getFieldX(),e.rectObject.y=this.getFieldY(),e.rectObject},e.prototype.clear=function(){var t=this.parentTetrimino;if(t){try{t.removeChild(this)}catch(t){}for(var e=0,o=t.blocks.length;e<o;e++)if(t.blocks[e]===this){t.blocks.splice(e,1);break}if(0==t.blocks.length)try{t.clear()}catch(t){}}},e.RED=0,e.ORANGE=1,e.YELLOW=2,e.GREEN=3,e.BLUE=4,e.PURPLE=5,e.NAVY=6,e.GRAY=7,e.WHITE=8,e.colors=["assets/images/block_red.png","assets/images/block_orange.png","assets/images/block_yellow.png","assets/images/block_green.png","assets/images/block_blue.png","assets/images/block_purple.png","assets/images/block_navy.png","assets/images/block_gray.png","assets/images/block_white.png"],e.rectangle=new h,e.rectObject={x:0,y:0,width:20,height:20},e}(l),v=function(){function t(t){this.max=0,this.max=t}return t.prototype.setMax=function(t){this.max=t},t.prototype.next=function(){return Math.floor(Math.random()*this.max)},t}();var f=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const y=function(e){function o(){var o=e.call(this,"div")||this;return o.stage=null,o.blocks=[],o.rollPositions=[],o.rollPositions1=[],o.rollPositions2=[],o.forwardPositions=[],o.reversePositions=[],o.initParam={x:0,width:0},o.holdPoint={x:0,y:0},o.position=0,o.isLoaded=!1,o.type=0,o.isForward=!0,o.blockLoadCompleteListener=function(){o.loader.removeEventListener(t.COMPLETE,o.blockLoadCompleteListener),o.createPosition(o.position);for(var e=0;e<4;e++)o.appendChild(o.blocks[e]);o.isLoaded=!0,o.dispatchEvent(new t(t.COMPLETE))},o.loader=new s,o.loader.addEventListener(t.COMPLETE,o.blockLoadCompleteListener),o}return f(o,e),o.prototype.getX=function(){return o.rectangle.getX(this)},o.prototype.getY=function(){return o.rectangle.getY(this)},o.prototype.load=function(){this.loader&&this.loader.set(this.blocks).load()},o.prototype.setStage=function(){40==this.initParam.width||-60==this.getY()?this.move(this.initParam.x,0):this.move(this.initParam.x,-20)},o.prototype.rightMoveCheck=function(){for(var t=0;t<4;t++){var e=this.blocks[t].getFieldRect();if(e.x+=20,e.x>180)return!1;if(this.stage&&!this.stage.activeBlockCheck(e))return!1}return!0},o.prototype.leftMoveCheck=function(){for(var t=0;t<4;t++){var e=this.blocks[t].getFieldRect();if(e.x-=20,e.x<0)return!1;if(this.stage&&!this.stage.activeBlockCheck(e))return!1}return!0},o.prototype.bottomMoveCheck=function(){for(var t=0;t<4;t++){var e=this.blocks[t].getFieldRect();if(e.y+=20,e.y>380)return!1;if(this.stage&&!this.stage.activeBlockCheck(e))return!1}return!0},o.prototype.topMoveCheck=function(){for(var t=0;t<4;t++){var e=this.blocks[t].getFieldRect();if(e.y-=20,this.stage&&!this.stage.activeBlockCheck(e))return!1}return!0},o.prototype.rightMove=function(){return!!this.rightMoveCheck()&&(this.set("css.left",this.getX()+20+"px"),!0)},o.prototype.leftMove=function(){return!!this.leftMoveCheck()&&(this.set("css.left",this.getX()-20+"px"),!0)},o.prototype.bottomMove=function(){return!!this.bottomMoveCheck()&&(this.set("css.top",this.getY()+20+"px"),!0)},o.prototype.topMove=function(){return!!this.topMoveCheck()&&(this.set("css.top",this.getY()-20+"px"),!0)},o.prototype.hardDrop=function(){for(;this.bottomMove(););},o.prototype.createPosition=function(t){for(var e=this.rollPositions[t],o=0;o<4;o++){var n=this.blocks[o],i=e[o];n.move(i.x,i.y)}},o.prototype.forwardRoll=function(){return this.isForward=!0,this.rollCheck()},o.prototype.reverseRoll=function(){return this.isForward=!1,this.rollCheck()},o.prototype.clear=function(){this.stage&&this.stage.removeChild(this);for(var t=0;t<4;t++)try{this.blocks[t].clear()}catch(t){}},o.prototype.rollPositionCheck=function(){var t=this.isForward?this.position+1:this.position-1;4==t&&(t=0),-1==t&&(t=3);for(var e=this.rollPositions[t],o=0;o<4;o++){var n=e[o],i=this.createRect(n);if(this.stage&&!this.stage.activeBlockCheck(i))return!1}return!0},o.prototype.rollFieldCheck=function(){if(this.rollTypeCheck(),this.rollPositionCheck())return!0;if(this.leftMove()){if(this.rollPositionCheck())return!0;this.rightMove()}if(this.rightMove()){if(this.rollPositionCheck())return!0;if(0!=this.type||1!=this.position&&3!=this.position||!this.rightMove())this.leftMove();else{if(this.rollPositionCheck())return!0;this.leftMove(),this.leftMove()}}return this.set("css.left",this.getX()+20+"px"),!!this.rollPositionCheck()||(this.leftMove(),this.set("css.left",this.getX()-20+"px"),!!this.rollPositionCheck()||(this.rightMove(),!1))},o.prototype.rollTypeCheck=function(){0==this.type&&(this.rollPositions=this.bottomMoveCheck()?this.rollPositions1:this.rollPositions2)},o.prototype.rollCheck=function(){return this.rollFieldCheck()?(this.roll(),!0):!(!this.topMove()||(this.rollFieldCheck()?(this.roll(),0):this.topMove()?this.rollFieldCheck()?(this.roll(),0):this.topMove()?this.rollFieldCheck()?(this.roll(),0):(this.bottomMove(),this.bottomMove(),this.bottomMove(),1):(this.bottomMove(),this.bottomMove(),1):(this.bottomMove(),1)))},o.prototype.roll=function(){this.isForward?this.position++:this.position--,4==this.position&&(this.position=0),-1==this.position&&(this.position=3),this.createPosition(this.position)},o.prototype.createRect=function(t){return o.rectObject.x=t.x+this.getX(),o.rectObject.y=t.y+this.getY(),o.rectObject},o.rectangle=new h,o.rectObject={x:0,y:0,width:20,height:20},o}(i);var m=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const g=function(t){function e(){var e=t.call(this)||this;return e.move(60,-80),e.type=0,e.initParam={x:60,width:80},e.holdPoint={x:0,y:0},e.blocks=[new d(d.BLUE,e),new d(d.BLUE,e),new d(d.BLUE,e),new d(d.BLUE,e)],e.rollPositions1=[[{x:0,y:20},{x:20,y:20},{x:40,y:20},{x:60,y:20}],[{x:40,y:0},{x:40,y:20},{x:40,y:40},{x:40,y:60}],[{x:0,y:20},{x:20,y:20},{x:40,y:20},{x:60,y:20}],[{x:40,y:0},{x:40,y:20},{x:40,y:40},{x:40,y:60}]],e.rollPositions2=[[{x:0,y:20},{x:20,y:20},{x:40,y:20},{x:60,y:20}],[{x:40,y:-40},{x:40,y:-20},{x:40,y:0},{x:40,y:20}],[{x:0,y:20},{x:20,y:20},{x:40,y:20},{x:60,y:20}],[{x:40,y:-40},{x:40,y:-20},{x:40,y:0},{x:40,y:20}]],e.rollPositions=e.rollPositions1,e}return m(e,t),e}(y);var L=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const E=function(t){function e(){var e=t.call(this)||this;return e.move(60,-80),e.type=2,e.initParam={x:60,width:60},e.holdPoint={x:0,y:-20},e.blocks=[new d(d.NAVY,e),new d(d.NAVY,e),new d(d.NAVY,e),new d(d.NAVY,e)],e.rollPositions=[[{x:0,y:20},{x:20,y:20},{x:40,y:20},{x:40,y:40}],[{x:20,y:0},{x:20,y:20},{x:20,y:40},{x:0,y:40}],[{x:0,y:20},{x:0,y:40},{x:20,y:40},{x:40,y:40}],[{x:20,y:0},{x:40,y:0},{x:20,y:20},{x:20,y:40}]],e}return L(e,t),e}(y);var w=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const C=function(t){function e(){var e=t.call(this)||this;return e.move(60,-80),e.type=3,e.initParam={x:60,width:60},e.holdPoint={x:0,y:-20},e.blocks=[new d(d.ORANGE,e),new d(d.ORANGE,e),new d(d.ORANGE,e),new d(d.ORANGE,e)],e.rollPositions=[[{x:0,y:20},{x:20,y:20},{x:40,y:20},{x:0,y:40}],[{x:0,y:0},{x:20,y:0},{x:20,y:20},{x:20,y:40}],[{x:0,y:40},{x:20,y:40},{x:40,y:40},{x:40,y:20}],[{x:20,y:0},{x:20,y:20},{x:20,y:40},{x:40,y:40}]],e}return w(e,t),e}(y);var T=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const _=function(t){function e(){var e=t.call(this)||this;return e.move(80,-60),e.type=1,e.initParam={x:80,width:40},e.holdPoint={x:20,y:0},e.blocks=[new d(d.YELLOW,e),new d(d.YELLOW,e),new d(d.YELLOW,e),new d(d.YELLOW,e)],e.rollPositions=[[{x:0,y:0},{x:20,y:0},{x:0,y:20},{x:20,y:20}],[{x:0,y:0},{x:20,y:0},{x:0,y:20},{x:20,y:20}],[{x:0,y:0},{x:20,y:0},{x:0,y:20},{x:20,y:20}],[{x:0,y:0},{x:20,y:0},{x:0,y:20},{x:20,y:20}]],e}return T(e,t),e}(y);var b=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const O=function(t){function e(){var e=t.call(this)||this;return e.move(60,-80),e.type=4,e.initParam={x:60,width:60},e.holdPoint={x:0,y:-20},e.blocks=[new d(d.GREEN,e),new d(d.GREEN,e),new d(d.GREEN,e),new d(d.GREEN,e)],e.rollPositions=[[{x:0,y:40},{x:20,y:40},{x:20,y:20},{x:40,y:20}],[{x:0,y:0},{x:0,y:20},{x:20,y:20},{x:20,y:40}],[{x:0,y:40},{x:20,y:40},{x:20,y:20},{x:40,y:20}],[{x:0,y:0},{x:0,y:20},{x:20,y:20},{x:20,y:40}]],e}return b(e,t),e}(y);var P=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const x=function(t){function e(){var e=t.call(this)||this;return e.move(60,-80),e.type=6,e.initParam={x:60,width:60},e.holdPoint={x:0,y:-20},e.blocks=[new d(d.PURPLE,e),new d(d.PURPLE,e),new d(d.PURPLE,e),new d(d.PURPLE,e)],e.rollPositions=[[{x:0,y:20},{x:20,y:20},{x:40,y:20},{x:20,y:40}],[{x:0,y:20},{x:20,y:0},{x:20,y:20},{x:20,y:40}],[{x:20,y:20},{x:0,y:40},{x:20,y:40},{x:40,y:40}],[{x:20,y:0},{x:20,y:20},{x:20,y:40},{x:40,y:20}]],e}return P(e,t),e}(y);var k=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const M=function(t){function e(){var e=t.call(this)||this;return e.move(60,-80),e.type=5,e.initParam={x:60,width:60},e.holdPoint={x:0,y:-20},e.blocks=[new d(d.RED,e),new d(d.RED,e),new d(d.RED,e),new d(d.RED,e)],e.rollPositions=[[{x:0,y:20},{x:20,y:20},{x:20,y:40},{x:40,y:40}],[{x:40,y:0},{x:40,y:20},{x:20,y:20},{x:20,y:40}],[{x:0,y:20},{x:20,y:20},{x:20,y:40},{x:40,y:40}],[{x:40,y:0},{x:40,y:20},{x:20,y:20},{x:20,y:40}]],e}return k(e,t),e}(y),F=function(){function t(){}return t.get=function(e){return t.getTetrimino(e)},t.getRandom=function(){return t.getTetrimino(t.random.next())},t.getClone=function(e){var o=t.getTetrimino(e.type);return o.stage=e.stage,o},t.getGhost=function(e){var o=t.getClone(e);for(var n in o.blocks=[new d(d.GRAY,o),new d(d.GRAY,o),new d(d.GRAY,o),new d(d.GRAY,o)],o.blocks)o.blocks[n].setAlpha(.2);return o.load(),o},t.getTetrimino=function(t){if(0==t)return new g;if(1==t)return new _;if(2==t)return new E;if(3==t)return new C;if(4==t)return new O;if(5==t)return new M;if(6==t)return new x;throw new TypeError("There is no type of Tetrimino.")},t.random=new v(7),t}();var D=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const S=function(e){function o(){var o=e.call(this,"div")||this;return o.list=[],o.blockLineCompleteListener=function(){o.loader.removeEventListener(t.COMPLETE,o.blockLineCompleteListener),o.list.splice(0,o.list.length),o.dispatchEvent(new t(t.COMPLETE))},o.drawRect(120,20,"#FFFFFF"),o.loader=new s,o.loader.addEventListener(t.COMPLETE,o.blockLineCompleteListener),o}return D(o,e),o.prototype.load=function(){for(var t=0,e=0;t<6;t++,e+=20){var o=new d(d.GRAY);o.move(e,0),this.list.push(o),this.appendChild(o)}this.loader.set(this.list).load()},o}(i);var R=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const I=function(e){function o(){var o=e.call(this,"div")||this;return o.blocks=[],o.backgroundLoadCompleteListener=function(){o.loader.removeEventListener(t.COMPLETE,o.backgroundLoadCompleteListener);for(var e=0,n=0,i=0;e<8;e++)(r=o.blocks[e]).move(n,i),o.appendChild(r),80==(n+=20)&&(n=0,i+=20);for(o.blocks.splice(0,o.blocks.length),e=0;e<16;e++){var r=new d(d.GRAY);o.blocks.push(r)}o.loader.addEventListener(t.COMPLETE,o.grayLoadCompleteListener),o.loader.set(o.blocks).load()},o.grayLoadCompleteListener=function(){o.loader.removeEventListener(t.COMPLETE,o.grayLoadCompleteListener);for(var e=0,n=-20;e<6;e++,n+=20)(r=o.blocks[e]).move(n,-20),o.appendChild(r);e=6,n=-20;for(var i=0;e<10;e++){var r;(r=o.blocks[e]).move(n,i),o.appendChild(r),-20==n?n=80:(n=-20,i+=20)}o.blocks.splice(0,o.blocks.length),o.dispatchEvent(new t(t.COMPLETE))},o.loader=new s,o.loader.addEventListener(t.COMPLETE,o.backgroundLoadCompleteListener),o}return R(o,e),o.prototype.load=function(){for(var t=0;t<8;t++){var e=new d(d.WHITE);e.setAlpha(.2),this.blocks.push(e)}this.loader.set(this.blocks).load()},o}(i);var j=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const A=function(e){function o(o){var n=e.call(this)||this;return n.imageMouseDownListener=function(){n.stage.appendChild(n.stage.title),n.stage.stopSoundPlay(),n.appendChild(n.downImage),n.appendChild(n.cover),n.stage.reset()},n.imageMouseUpListener=function(){n.appendChild(n.upImage),n.appendChild(n.cover)},n.buttonImageLoadCompleteListener=function(e){e.target.removeEventListener(t.COMPLETE,n.buttonImageLoadCompleteListener),n.appendChild(n.downImage),n.appendChild(n.upImage),n.appendChild(n.cover),n.dispatchEvent(new t(t.SHOW_END))},n.stage=o,n.upImage=new l("assets/images/reset_btn_1.png"),n.upImage.move(0,0),n.downImage=new l("assets/images/reset_btn_2.png"),n.downImage.move(0,0),n.cover=new i("div"),n.cover.drawRect(80,40,"#FFFFFF"),n.cover.set("css.cursor","pointer"),n.cover.move(0,0),n.cover.setAlpha(0),n.cover.addEventListener(t.MOUSE_DOWN,n.imageMouseDownListener),n.cover.addEventListener(t.MOUSE_UP,n.imageMouseUpListener),n.cover.addEventListener(t.MOUSE_OUT,n.imageMouseUpListener),n}return j(o,e),o.prototype.show=function(){this.removeEventListener(t.COMPLETE,this.buttonImageLoadCompleteListener);var e=new s([this.upImage,this.downImage]);e.addEventListener(t.COMPLETE,this.buttonImageLoadCompleteListener),e.load()},o}(I);var N=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const H=function(e){function o(o){var n=e.call(this)||this;return n.isStart=!1,n.imageMouseDownListener=function(){n.isStart||(n.stage.stopSoundPlay(),n.stage.removeChild(n.stage.title),n.appendChild(n.downImage),n.appendChild(n.cover),n.stage.startDrop(),n.isStart=!0,n.cover.set("css.cursor","auto"))},n.buttonImageLoadCompleteListener=function(e){e.target.removeEventListener(t.COMPLETE,n.buttonImageLoadCompleteListener),n.appendChild(n.downImage),n.appendChild(n.upImage),n.appendChild(n.cover),n.dispatchEvent(new t(t.SHOW_END))},n.stage=o,n.upImage=new l("assets/images/start_btn_1.png"),n.upImage.move(0,0),n.downImage=new l("assets/images/start_btn_2.png"),n.downImage.move(0,0),n.cover=new i("div"),n.cover.drawRect(80,40,"#FFFFFF"),n.cover.set("css.cursor","pointer"),n.cover.move(0,0),n.cover.setAlpha(0),n.cover.addEventListener(t.MOUSE_DOWN,n.imageMouseDownListener),n}return N(o,e),o.prototype.reset=function(){this.isStart=!1,this.cover.set("css.cursor","pointer"),this.appendChild(this.upImage),this.appendChild(this.cover)},o.prototype.show=function(){var e=new s([this.upImage,this.downImage]);e.addEventListener(t.COMPLETE,this.buttonImageLoadCompleteListener),e.load()},o}(I);var B=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const Y=function(e){function o(o){var n=e.call(this,"div")||this;return n.count=0,n.displayLoadCompleteListener=function(){n.loader.removeEventListener(t.COMPLETE,n.displayLoadCompleteListener),n.start.move(0,0),n.reset.move(0,60),n.blockSpace.move(-20,100),n.dispatchEvent(new t(t.COMPLETE))},n.showendListener=function(e){e.target.removeEventListener(t.SHOW_END,n.showendListener),n.count++,2==n.count&&(n.appendChild(n.start),n.appendChild(n.reset),n.appendChild(n.blockSpace),n.dispatchEvent(new t(t.SHOW_END)))},n.start=new H(o),n.reset=new A(o),n.blockSpace=new S,n.loader=new s([n.start,n.reset,n.blockSpace]),n.loader.addEventListener(t.COMPLETE,n.displayLoadCompleteListener),n}return B(o,e),o.prototype.load=function(){this.loader.load()},o.prototype.show=function(){this.start.addEventListener(t.SHOW_END,this.showendListener),this.reset.addEventListener(t.SHOW_END,this.showendListener),this.start.show(),this.reset.show()},o}(i);var W=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const U=function(e){function o(){var o=e.call(this,"div")||this;return o.list=[],o.blockLineCompleteListener=function(){o.loader.removeEventListener(t.COMPLETE,o.blockLineCompleteListener),o.list.splice(0,o.list.length),o.dispatchEvent(new t(t.COMPLETE))},o.drawRect(120,20,"#FFFFFF"),o.loader=new s,o.loader.addEventListener(t.COMPLETE,o.blockLineCompleteListener),o}return W(o,e),o.prototype.load=function(){for(var t=0,e=0;t<6;t++,e+=20){var o=new d(d.GRAY);o.move(e,0),this.list.push(o),this.appendChild(o)}this.loader.set(this.list).load()},o}(i);var G=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const K=function(e){function o(o){var n=e.call(this)||this;return n.isGhost=!1,n.imageMouseDownListener=function(){n.stage.stopSoundPlay(),n.isGhost?(n.appendChild(n.upImage),n.stage.ghostTetrimino&&n.stage.removeChild(n.stage.ghostTetrimino)):(n.appendChild(n.downImage),n.stage.ghostTetrimino&&n.stage.appendChild(n.stage.ghostTetrimino)),n.appendChild(n.cover),n.isGhost=!n.isGhost},n.buttonImageLoadCompleteListener=function(e){e.target.removeEventListener(t.COMPLETE,n.buttonImageLoadCompleteListener),n.appendChild(n.downImage),n.appendChild(n.upImage),n.appendChild(n.cover),n.dispatchEvent(new t(t.SHOW_END))},n.stage=o,n.upImage=new l("assets/images/ghost_btn_1.png"),n.upImage.move(0,0),n.downImage=new l("assets/images/ghost_btn_2.png"),n.downImage.move(0,0),n.cover=new i("div"),n.cover.drawRect(80,40,"#FFFFFF"),n.cover.set("css.cursor","pointer"),n.cover.move(0,0),n.cover.setAlpha(0),n.cover.addEventListener(t.MOUSE_DOWN,n.imageMouseDownListener),n}return G(o,e),o.prototype.reset=function(){this.appendChild(this.downImage),this.appendChild(this.upImage),this.appendChild(this.cover),this.isGhost=!1},o.prototype.show=function(){this.removeEventListener(t.COMPLETE,this.buttonImageLoadCompleteListener);var e=new s([this.upImage,this.downImage]);e.addEventListener(t.COMPLETE,this.buttonImageLoadCompleteListener),e.load()},o}(I);var z=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const X=function(e){function o(o){var n=e.call(this)||this;return n.isPause=!1,n.imageMouseDownListener=function(){n.stage.stopSoundPlay(),n.appendChild(n.isPause?n.upImage:n.downImage),n.isPause=!n.isPause,n.stage.pause(),n.appendChild(n.cover)},n.buttonImageLoadCompleteListener=function(e){e.target.removeEventListener(t.COMPLETE,n.buttonImageLoadCompleteListener),n.appendChild(n.downImage),n.appendChild(n.upImage),n.appendChild(n.cover),n.dispatchEvent(new t(t.SHOW_END))},n.stage=o,n.upImage=new l("assets/images/pause_btn_1.png"),n.upImage.move(0,0),n.downImage=new l("assets/images/pause_btn_2.png"),n.downImage.move(0,0),n.cover=new i("div"),n.cover.drawRect(80,40,"#FFFFFF"),n.cover.set("css.cursor","pointer"),n.cover.move(0,0),n.cover.setAlpha(0),n.cover.addEventListener(t.MOUSE_DOWN,n.imageMouseDownListener),n}return z(o,e),o.prototype.reset=function(){this.appendChild(this.downImage),this.appendChild(this.upImage),this.appendChild(this.cover),this.isPause=!1},o.prototype.show=function(){this.removeEventListener(t.COMPLETE,this.buttonImageLoadCompleteListener);var e=new s([this.upImage,this.downImage]);e.addEventListener(t.COMPLETE,this.buttonImageLoadCompleteListener),e.load()},o}(I);var V=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const Z=function(e){function o(o){var n=e.call(this,"div")||this;return n.count=0,n.displayLoadCompleteListener=function(){n.loader.removeEventListener(t.COMPLETE,n.displayLoadCompleteListener),n.ghost.move(0,0),n.pause.move(0,60),n.blockSpace.move(-20,100),n.dispatchEvent(new t(t.COMPLETE))},n.showendListener=function(e){e.target.removeEventListener(t.SHOW_END,n.showendListener),n.count++,2==n.count&&(n.appendChild(n.ghost),n.appendChild(n.pause),n.appendChild(n.blockSpace),n.dispatchEvent(new t(t.SHOW_END)))},n.ghost=new K(o),n.pause=new X(o),n.blockSpace=new U,n.loader=new s([n.ghost,n.pause,n.blockSpace]),n.loader.addEventListener(t.COMPLETE,n.displayLoadCompleteListener),n}return V(o,e),o.prototype.load=function(){this.loader.load()},o.prototype.show=function(){this.ghost.addEventListener(t.SHOW_END,this.showendListener),this.pause.addEventListener(t.SHOW_END,this.showendListener),this.ghost.show(),this.pause.show()},o}(i);var q=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const J=function(e){function o(){var o=e.call(this,"div")||this;return o.list=[],o.blockLineCompleteListener=function(){o.loader.removeEventListener(t.COMPLETE,o.blockLineCompleteListener),o.list.splice(0,o.list.length),o.dispatchEvent(new t(t.COMPLETE))},o.drawRect(120,60,"#FFFFFF"),o.loader=new s,o.loader.addEventListener(t.COMPLETE,o.blockLineCompleteListener),o}return q(o,e),o.prototype.load=function(){for(var t=0,e=0,o=0;t<18;t++){var n=new d(d.GRAY);n.move(e,o),this.list.push(n),this.appendChild(n),120==(e+=20)&&(e=0,o+=20)}this.loader.set(this.list).load()},o}(i);var Q=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const $=function(t){function e(){var e=t.call(this)||this;return e.level=1,e.isCounterStop=!1,e.titleLabel=new i("label"),e.titleLabel.params({"css.color":"#FFFF00","css.fontSize":"15px","css.fontWeight":"bold",innerHTML:"LEVEL"}),e.titleLabel.move(5,0),e.levelLabel=new i("label"),e.levelLabel.params({"css.color":"#FFFF00","css.fontSize":"16px","css.fontWeight":"bold",innerHTML:e.level.toString()}),e.levelLabel.move(5,19),e.cover=new i("div"),e.cover.drawRect(120,80,"#FFFFFF"),e.cover.setAlpha(0),e.cover.move(-20,-20),e}return Q(e,t),e.prototype.add=function(t){this.isCounterStop||(this.level+=t,this.levelCheck())},e.prototype.reset=function(){this.level=1,this.levelLabel.params({"css.color":"#FFFF00",innerHTML:this.level.toString()})},e.prototype.show=function(){this.appendChild(this.titleLabel),this.appendChild(this.levelLabel),this.appendChild(this.cover)},e.prototype.levelCheck=function(){if(this.level>=99)return this.level=99,this.isCounterStop=!0,void this.levelLabel.params({"css.color":"#FF0000",innerHTML:"OVER"});this.levelLabel.set("innerHTML",this.level.toString())},e}(I);var tt=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const et=function(t){function e(){var e=t.call(this)||this;return e.line=0,e.isCounterStop=!1,e.titleLabel=new i("label"),e.titleLabel.params({"css.color":"#FFFF00","css.fontSize":"15px","css.fontWeight":"bold",innerHTML:"LINE"}),e.titleLabel.move(5,0),e.lineLabel=new i("label"),e.lineLabel.params({"css.color":"#FFFF00","css.fontSize":"16px","css.fontWeight":"bold",innerHTML:e.line.toString()}),e.lineLabel.move(5,19),e.cover=new i("div"),e.cover.drawRect(120,80,"#FFFFFF"),e.cover.setAlpha(0),e.cover.move(-20,-20),e}return tt(e,t),e.prototype.add=function(t){this.isCounterStop||(this.line+=t,this.lineCheck())},e.prototype.reset=function(){this.line=0,this.lineLabel.params({"css.color":"#FFFF00",innerHTML:this.line.toString()})},e.prototype.show=function(){this.appendChild(this.titleLabel),this.appendChild(this.lineLabel),this.appendChild(this.cover)},e.prototype.lineCheck=function(){if(this.line>=999)return this.line=999,this.isCounterStop=!0,void this.lineLabel.params({"css.color":"#FF0000",innerHTML:"OVER"});this.lineLabel.set("innerHTML",this.line.toString())},e}(I);var ot=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const nt=function(t){function e(){var e=t.call(this)||this;return e.score=0,e.isCounterStop=!1,e.titleLabel=new i("label"),e.titleLabel.params({"css.color":"#FFFF00","css.fontSize":"15px","css.fontWeight":"bold",innerHTML:"SCORE"}),e.titleLabel.move(5,0),e.scoreLabel=new i("label"),e.scoreLabel.params({"css.color":"#FFFF00","css.fontSize":"16px","css.fontWeight":"bold",innerHTML:e.score.toString()}),e.scoreLabel.move(5,19),e.cover=new i("div"),e.cover.drawRect(120,80,"#FFFFFF"),e.cover.setAlpha(0),e.cover.move(-20,-20),e}return ot(e,t),e.prototype.add=function(t){this.isCounterStop||(this.score+=t,this.scoreCheck())},e.prototype.reset=function(){this.score=0,this.scoreLabel.params({"css.color":"#FFFF00",innerHTML:this.score.toString()})},e.prototype.show=function(){this.appendChild(this.titleLabel),this.appendChild(this.scoreLabel),this.appendChild(this.cover)},e.prototype.scoreCheck=function(){if(this.score>=999999)return this.score=999999,this.isCounterStop=!0,void this.scoreLabel.params({"css.color":"#FF0000",innerHTML:"OVER"});this.scoreLabel.set("innerHTML",this.score.toString())},e}(I);var it=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const rt=function(e){function o(){var o=e.call(this,"div")||this;return o.displayLoadCompleteListener=function(){o.loader.removeEventListener(t.COMPLETE,o.displayLoadCompleteListener),o.score.move(0,0),o.line.move(0,60),o.level.move(0,120),o.blockSpace.move(-20,160),o.appendChild(o.score),o.appendChild(o.line),o.appendChild(o.level),o.appendChild(o.blockSpace),o.dispatchEvent(new t(t.COMPLETE))},o.score=new nt,o.line=new et,o.level=new $,o.blockSpace=new J,o.loader=new s([o.score,o.line,o.level,o.blockSpace]),o.loader.addEventListener(t.COMPLETE,o.displayLoadCompleteListener),o}return it(o,e),o.prototype.load=function(){this.loader.load()},o.prototype.reset=function(){},o}(i);var st=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const at=function(e){function o(o){var n=e.call(this)||this;return n.isLoaded=!1,n.tetrimino=null,n.tetriminoLoadCompleteListener=function(e){var o=e.target;o.removeEventListener(t.COMPLETE,n.tetriminoLoadCompleteListener),o.move(o.holdPoint.x,o.holdPoint.y),n.appendChild(o),n.tetrimino=o,n.dispatchEvent(new t(t.COMPLETE))},n.stage=o,n}return st(o,e),o.prototype.addTetrimino=function(e){if(e.position=0,e.createPosition(0),!e.isLoaded)return e.addEventListener(t.COMPLETE,this.tetriminoLoadCompleteListener),e.load(),void(e.stage=this.stage);e.move(e.holdPoint.x,e.holdPoint.y),this.appendChild(e),this.tetrimino=e,e.stage=this.stage,this.dispatchEvent(new t(t.COMPLETE))},o.prototype.setTetrimino=function(t){this.removeTetrimino(),this.addTetrimino(t)},o.prototype.removeTetrimino=function(){var t=this.tetrimino;return t&&this.removeChild(t),t},o.prototype.isEmpty=function(){return null==this.tetrimino},o}(I);var lt=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const ct=function(e){function o(o){var n=e.call(this,"div")||this;return n.list=[],n.tetriminoHolderCompleteListener=function(){n.loader.removeEventListener(t.COMPLETE,n.tetriminoHolderCompleteListener);for(var e=[],o=0,i=0,r=0;o<18;o++){var s=new d(d.GRAY);s.move(i,r),n.blockLine.appendChild(s),e.push(s),120==(i+=20)&&(i=0,r+=20)}n.loader.addEventListener(t.COMPLETE,n.blockLineCompleteListener),n.loader.set(e).load()},n.tetriminoLoadCompleteListener=function(){n.loader.removeEventListener(t.COMPLETE,n.tetriminoLoadCompleteListener),n.first.setTetrimino(n.list[0]),n.second.setTetrimino(n.list[1]),n.third.setTetrimino(n.list[2]),n.four.setTetrimino(n.list[3]),n.dispatchEvent(new t(t.COMPLETE))},n.newTetriminoCompleteListener=function(e){var o=e.target;o.removeEventListener(t.COMPLETE,n.newTetriminoCompleteListener),n.list.splice(0,1),n.list.push(o),n.first.setTetrimino(n.list[0]),n.second.setTetrimino(n.list[1]),n.third.setTetrimino(n.list[2]),n.four.setTetrimino(n.list[3]),n.dispatchEvent(new t(t.COMPLETE))},n.blockLineCompleteListener=function(){n.loader.removeEventListener(t.COMPLETE,n.blockLineCompleteListener),n.first.move(70,0),n.second.move(70,60),n.third.move(70,120),n.four.move(70,180),n.blockLine.move(50,220),n.appendChild(n.first),n.appendChild(n.second),n.appendChild(n.third),n.appendChild(n.four),n.appendChild(n.blockLine),n.init()},n.stage=o,n.first=new at(o),n.second=new at(o),n.third=new at(o),n.four=new at(o),n.blockLine=new i("div"),n.blockLine.drawRect(120,60,"#FFFFFF"),n.blockLine.move(0,0),n.loader=new s,n}return lt(o,e),o.prototype.load=function(){this.loader.addEventListener(t.COMPLETE,this.tetriminoHolderCompleteListener),this.loader.set([this.first,this.second,this.third,this.four]).load()},o.prototype.init=function(){this.list.splice(0,this.list.length);for(var e=0;e<10;e++){var o=F.getRandom();o.stage=this.stage,this.list.push(o)}this.loader.addEventListener(t.COMPLETE,this.tetriminoLoadCompleteListener),this.loader.set(this.list).load()},o.prototype.getTetrimino=function(){var e=this.first.removeTetrimino();e&&e.setStage();var o=F.getRandom();return o.stage=this.stage,o.addEventListener(t.COMPLETE,this.newTetriminoCompleteListener),o.load(),e},o.prototype.reset=function(){this.first.removeTetrimino(),this.second.removeTetrimino(),this.third.removeTetrimino(),this.four.removeTetrimino();for(var t=0;t<10;t++)try{this.list[t].clear()}catch(t){}this.list.splice(0,10),this.init()},o}(i);var pt=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const ht=function(e){function o(){var o=e.call(this,"div")||this;o.activeBlocks={},o.ghostTetrimino=null,o.keyCodes={left:!1,right:!1},o.score=[500,1e3,2e3,4e3],o.fields=[],o.moveCount=0,o.clearCound=0,o.showCount=0,o.totalMoveCount=0,o.dropCheckFlag=!1,o.ishold=!1,o.isPause=!1,o.result=[],o.activeTetrimino=null,o.stopSound=null,o.clearBlockListener=function(){o.delayTimer.removeEventListener(t.TIMER_END,o.clearBlockListener);for(var e=o.result.length,n=0;n<e;n++)for(var i=o.result[n]-1;i>=0;i--)for(var r=0;r<10;r++){var s=o.activeBlocks[i+""+r];s&&(delete o.activeBlocks[i+""+r],o.activeBlocks[i+1+""+r]=s,s.set("css.top",s.getY()+20+"px"))}o.dispatchEvent(new t(t.DROP_END)),o.delayTimer.addEventListener(t.TIMER_END,o.nextBlockListener),o.delayTimer.set(300,1).start()},o.tetriminoListResetCompleteListener=function(){o.tetriminoList.removeEventListener(t.COMPLETE,o.tetriminoListResetCompleteListener),o.pointDisplay.score.reset(),o.pointDisplay.line.reset(),o.pointDisplay.level.reset(),o.pointDisplay.reset(),o.optionDisplay.ghost.reset(),o.optionDisplay.pause.reset(),o.controllDisplay.start.reset();try{o.removeChild(o.gameOver)}catch(t){}},o.tetriminoHolderLoadCompleteListener=function(){o.tetriminoHolder.removeEventListener(t.COMPLETE,o.tetriminoHolderLoadCompleteListener),o.activeTetrimino&&o.activeTetrimino.clear(),o.ghostTetrimino&&o.ghostTetrimino.clear(),o.ishold=!0,o.speedTimer.reset(),o.speedTimer.removeEventListener(t.TIMER,o.dropTetriminoListener),o.delayTimer.reset(),o.delayTimer.removeEventListener(t.TIMER_END,o.dropEndCheckListener),o.delayTimer.addEventListener(t.TIMER_END,o.nextBlockListener),o.delayTimer.set(300,1).start()},o.nextBlockListener=function(){o.delayTimer.removeEventListener(t.TIMER_END,o.nextBlockListener),o.startDrop()},o.dropTetriminoListener=function(){!o.activeTetrimino||o.activeTetrimino.bottomMove()||o.dropCheckFlag||(o.dropCheckFlag=!0,o.moveCount=o.totalMoveCount,o.delayTimer.addEventListener(t.TIMER_END,o.dropEndCheckListener),o.delayTimer.set(300,1).start())},o.documentKeyDownListener=function(t){"ArrowLeft"!==t.key||o.isPause||(o.activeTetrimino&&o.activeTetrimino.leftMove(),o.ghostHardDrop(),o.keyCodes.left=!0,o.totalMoveCount++),"ArrowRight"!==t.key||o.isPause||(o.activeTetrimino&&o.activeTetrimino.rightMove(),o.ghostHardDrop(),o.keyCodes.right=!0,o.totalMoveCount++),"ArrowUp"!==t.key||o.isPause||(o.activeTetrimino&&o.activeTetrimino.hardDrop(),o.stopDrop()),"ArrowDown"!==t.key||o.isPause||o.activeTetrimino&&!o.activeTetrimino.bottomMove()&&o.stopDrop(),"z"!==t.key||o.isPause||(o.activeTetrimino&&o.activeTetrimino.reverseRoll(),o.ghostReverseRoll(),o.slide(),o.totalMoveCount++),"x"!==t.key||o.isPause||(o.activeTetrimino&&o.activeTetrimino.forwardRoll(),o.ghostForwardRoll(),o.slide(),o.totalMoveCount++),"c"!==t.key||o.isPause||(o.activeTetrimino&&o.tetriminoHolder.isEmpty()&&!o.ishold?o.addHoldTetrimino():!o.activeTetrimino||o.tetriminoHolder.isEmpty()||o.ishold||o.removeHoldTetrimino())},o.documentKeyUpListener=function(t){"ArrowLeft"===t.key&&(o.keyCodes.left=!1),"ArrowRight"===t.key&&(o.keyCodes.right=!1)},o.dropEndCheckListener=function(){o.moveCount==o.totalMoveCount&&o.stopDrop(),o.dropCheckFlag=!1},o.blockCompleteListener=function(){o.loader.removeEventListener(t.COMPLETE,o.blockCompleteListener);for(var e=0,n=0,i=0;e<200;e++){var r=o.fields[e];r.move(n,i),o.appendChild(r),200==(n+=20)&&(n=0,i+=20)}for(o.fields.splice(0,o.fields.length),e=0;e<64;e++)o.fields.push(new d(d.GRAY));o.loader.addEventListener(t.COMPLETE,o.grayBlockCompleteListener),o.loader.set(o.fields).load()},o.grayBlockCompleteListener=function(){o.loader.removeEventListener(t.COMPLETE,o.grayBlockCompleteListener);for(var e=0,n=-20;e<12;e++,n+=20)(r=o.fields[e]).move(n,-20),o.appendChild(r);e=12,n=-20;for(var i=0;e<52;e++)(r=o.fields[e]).move(n,i),o.appendChild(r),-20==n?n=200:(n=-20,i+=20);for(e=52,n=-20;e<64;e++,n+=20){var r;(r=o.fields[e]).move(n,400),o.appendChild(r)}o.fields.splice(0,o.fields.length),o.loader.addEventListener(t.COMPLETE,o.holdersCompleteListener),o.loader.set([o.controllDisplay,o.optionDisplay,o.tetriminoHolder,o.pointDisplay,o.title,o.gameOver,o.tetriminoList]).load()},o.holdersCompleteListener=function(){o.loader.removeEventListener(t.COMPLETE,o.holdersCompleteListener),o.tetriminoHolder.move(-140,0),o.pointDisplay.move(-140,60),o.optionDisplay.move(-140,300),o.controllDisplay.move(260,300),o.tetriminoList.move(190,0),o.pointDisplay.score.show(),o.pointDisplay.line.show(),o.pointDisplay.level.show(),o.controllDisplay.addEventListener(t.SHOW_END,o.displayShowEndCompleteListener),o.optionDisplay.addEventListener(t.SHOW_END,o.displayShowEndCompleteListener),o.controllDisplay.show(),o.optionDisplay.show()},o.displayShowEndCompleteListener=function(e){e.target.removeEventListener(t.SHOW_END,o.displayShowEndCompleteListener),o.showCount++,2==o.showCount&&(window.addEventListener(t.RESIZE,o.fieldResizeListener),o.appendChild(o.tetriminoHolder),o.appendChild(o.tetriminoList),o.appendChild(o.optionDisplay),o.appendChild(o.controllDisplay),o.appendChild(o.pointDisplay),o.appendChild(o.title),o.dispatchEvent(new t(t.COMPLETE)))},o.firstGhostDropListener=function(){o.delayTimer.reset(),o.delayTimer.removeEventListener(t.TIMER_END,o.firstGhostDropListener),o.ghostHardDrop();for(var e=0;e<4;e++)if(o.activeTetrimino){var n=o.activeTetrimino.blocks[e].getFieldRect();if(!o.activeBlockCheck(n))return void o.appendChild(o.gameOver)}o.speedTimer.addEventListener(t.TIMER,o.dropTetriminoListener),o.speedTimer.start(),document.addEventListener(t.KEY_DOWN,o.documentKeyDownListener),document.addEventListener(t.KEY_UP,o.documentKeyUpListener)},o.fieldResizeListener=function(){o.move((parseInt(o.documentBody.get("scrollWidth"))-200)/2,(window.innerHeight-440)/2)},o.title=new l("assets/images/title.png"),o.title.move(0,0),o.speedTimer=new p(1e3,0),o.delayTimer=new p(500,1),o.tetriminoHolder=new at(o),o.pointDisplay=new rt,o.controllDisplay=new Y(o),o.optionDisplay=new Z(o),o.tetriminoList=new ct(o),o.gameOver=new l("assets/images/game_over.png"),o.gameOver.move(20,190),o.documentBody=new i(document.body),o.loader=new s,o.loader.addEventListener(t.COMPLETE,o.blockCompleteListener);try{o.stopSound=new Audio("assets/sounds/stop.mp3")}catch(t){}return o}return pt(o,e),o.prototype.load=function(){for(var t=0;t<200;t++){var e=new d(d.WHITE);e.setAlpha(.2),this.fields.push(e)}this.loader.set(this.fields).load()},o.prototype.startDrop=function(){this.isPause=!1,this.optionDisplay.pause.reset(),this.activeTetrimino=this.tetriminoList.getTetrimino(),this.activeTetrimino&&(this.ghostTetrimino=F.getGhost(this.activeTetrimino),this.ghostTetrimino.setStage(),this.optionDisplay.ghost.isGhost&&this.appendChild(this.ghostTetrimino)),this.activeTetrimino&&this.appendChild(this.activeTetrimino),this.moveCount=0,this.totalMoveCount=0,this.dropCheckFlag=!1,this.keyCodes={left:!1,right:!1},this.delayTimer.addEventListener(t.TIMER_END,this.firstGhostDropListener),this.delayTimer.set(1,2).start()},o.prototype.stopDrop=function(){this.stopSoundPlay(),this.ghostTetrimino&&this.ghostTetrimino.clear(),this.pointDisplay.score.add(10),this.speedTimer.reset(),this.speedTimer.removeEventListener(t.TIMER,this.dropTetriminoListener),this.delayTimer.reset(),this.delayTimer.removeEventListener(t.TIMER_END,this.dropEndCheckListener),this.dropCheckFlag=!1,document.removeEventListener(t.KEY_DOWN,this.documentKeyDownListener),document.removeEventListener(t.KEY_UP,this.documentKeyUpListener);for(var e=0;e<4;e++)if(this.activeTetrimino&&!this.createActiveBlock(this.activeTetrimino.blocks[e]))return void this.appendChild(this.gameOver);this.resultDrop()},o.prototype.activeBlockCheck=function(t){if(t.x<0||t.x>180||t.y>380)return!1;var e=t.x/20,o=t.y/20;return void 0===this.activeBlocks[o+""+e]},o.prototype.pause=function(){this.isPause?(this.speedTimer.start(),this.delayTimer.start()):(this.speedTimer.reset(),this.delayTimer.reset()),this.isPause=!this.isPause},o.prototype.reset=function(){for(var e in this.speedTimer.reset(),this.speedTimer.removeEventListener(t.TIMER,this.dropTetriminoListener),this.delayTimer.reset(),this.delayTimer.removeEventListener(t.TIMER_END,this.dropEndCheckListener),this.delayTimer.removeEventListener(t.TIMER_END,this.nextBlockListener),this.delayTimer.removeEventListener(t.TIMER_END,this.clearBlockListener),document.removeEventListener(t.KEY_DOWN,this.documentKeyDownListener),document.removeEventListener(t.KEY_UP,this.documentKeyUpListener),this.activeBlocks){try{this.activeBlocks[e].clear()}catch(t){}delete this.activeBlocks[e]}this.keyCodes={left:!1,right:!1},this.activeTetrimino&&this.activeTetrimino.clear(),this.ghostTetrimino&&this.ghostTetrimino.clear();var o=this.tetriminoHolder.removeTetrimino();o&&o.clear(),this.speedTimer.delay=1e3,this.moveCount=0,this.clearCound=0,this.totalMoveCount=0,this.dropCheckFlag=!1,this.ishold=!1,this.isPause=!1,this.tetriminoList.addEventListener(t.COMPLETE,this.tetriminoListResetCompleteListener),this.tetriminoList.reset()},o.prototype.stopSoundPlay=function(){if(this.stopSound)try{this.stopSound.pause(),this.stopSound.currentTime=0,this.stopSound.play()}catch(t){}},o.prototype.resultDrop=function(){this.result=[],this.ishold=!1;for(var e=0;e<20;e++){for(var o=!0,n=0;n<10;n++)if(!this.activeBlocks[e+""+n]){o=!1;break}o&&this.result.push(e)}if(0==this.result.length)return this.dispatchEvent(new t(t.DROP_END)),this.delayTimer.addEventListener(t.TIMER_END,this.nextBlockListener),void this.delayTimer.set(300,1).start();for(var i=0,r=this.result.length;i<r;i++)for(n=0;n<10;n++)e=this.result[i],this.activeBlocks[e+""+n].clear(),delete this.activeBlocks[e+""+n];this.pointDisplay.score.add(this.score[r-1]),this.pointDisplay.line.add(r),this.clearCound+=r,this.clearCound>=10&&(this.setDropSpeed(),this.pointDisplay.level.add(1),this.clearCound=0),this.delayTimer.addEventListener(t.TIMER_END,this.clearBlockListener),this.delayTimer.set(500,1).start()},o.prototype.setDropSpeed=function(){1!=this.speedTimer.delay&&(this.speedTimer.delay>100?this.speedTimer.delay-=100:this.speedTimer.delay-=10,this.speedTimer.delay<=0&&(this.speedTimer.delay=1))},o.prototype.slide=function(){this.keyCodes.left&&!this.keyCodes.right&&(this.activeTetrimino&&this.activeTetrimino.leftMove(),this.ghostHardDrop()),!this.keyCodes.left&&this.keyCodes.right&&(this.activeTetrimino&&this.activeTetrimino.rightMove(),this.ghostHardDrop())},o.prototype.ghostHardDrop=function(){this.ghostTetrimino&&this.activeTetrimino&&(this.ghostTetrimino.move(this.activeTetrimino.getX(),this.activeTetrimino.getY()),this.ghostTetrimino.hardDrop())},o.prototype.ghostForwardRoll=function(){this.ghostTetrimino&&this.activeTetrimino&&(this.ghostTetrimino.move(this.activeTetrimino.getX(),this.activeTetrimino.getY()),this.ghostTetrimino.forwardRoll(),this.ghostTetrimino.hardDrop())},o.prototype.ghostReverseRoll=function(){this.ghostTetrimino&&this.activeTetrimino&&(this.ghostTetrimino.move(this.activeTetrimino.getX(),this.activeTetrimino.getY()),this.ghostTetrimino.reverseRoll(),this.ghostTetrimino.hardDrop())},o.prototype.createActiveBlock=function(t){var e=t.getFieldX()/20,o=t.getFieldY()/20;return!this.activeBlocks[o+""+e]&&(this.activeBlocks[o+""+e]=t,!0)},o.prototype.addHoldTetrimino=function(){this.stopSoundPlay(),document.removeEventListener(t.KEY_DOWN,this.documentKeyDownListener),document.removeEventListener(t.KEY_UP,this.documentKeyUpListener),this.tetriminoHolder.addEventListener(t.COMPLETE,this.tetriminoHolderLoadCompleteListener),this.activeTetrimino&&this.tetriminoHolder.addTetrimino(F.getClone(this.activeTetrimino))},o.prototype.removeHoldTetrimino=function(){this.stopSoundPlay(),document.removeEventListener(t.KEY_DOWN,this.documentKeyDownListener),document.removeEventListener(t.KEY_UP,this.documentKeyUpListener);var e=this.tetriminoHolder.removeTetrimino();e&&e.setStage(),this.activeTetrimino&&this.removeChild(this.activeTetrimino),this.ghostTetrimino&&this.ghostTetrimino.clear(),this.activeTetrimino&&this.tetriminoHolder.addTetrimino(this.activeTetrimino),this.activeTetrimino=e,this.activeTetrimino&&(this.ghostTetrimino=F.getGhost(this.activeTetrimino)),this.ghostTetrimino&&this.ghostTetrimino.setStage(),this.ghostTetrimino&&this.optionDisplay.ghost.isGhost&&this.appendChild(this.ghostTetrimino),this.activeTetrimino&&this.appendChild(this.activeTetrimino),this.ishold=!0,this.dropCheckFlag=!1,this.moveCount=0,this.totalMoveCount=0,this.delayTimer.reset(),this.delayTimer.removeEventListener(t.TIMER_END,this.dropEndCheckListener),this.delayTimer.addEventListener(t.TIMER_END,this.firstGhostDropListener),this.delayTimer.set(1,2).start()},o}(i);var ut=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();new(function(e){function o(){var o=e.call(this,"div")||this;o.images=[],o.imageCount=0,o.loadCompleteListener=function(){o.documentBody.appendChild(o),o.appendChild(o.text),o.timer.start(),o.stage.load()},o.timerListener=function(){try{o.removeChild(o.images[o.imageCount])}catch(t){}o.imageCount++,4==o.imageCount&&(o.imageCount=0),o.appendChild(o.images[o.imageCount])},o.stageLoadCompleteListener=function(){o.timer.reset(),o.timer.removeEventListener(t.TIMER,o.timerListener),o.stage.removeEventListener(t.COMPLETE,o.stageLoadCompleteListener),o.documentBody.removeChild(o),o.stage.move((parseInt(o.documentBody.get("scrollWidth"))-200)/2,(window.innerHeight-440)/2),o.documentBody.appendChild(o.stage),o.windowResizeListener(),window.removeEventListener(t.RESIZE,o.windowResizeListener)},o.windowResizeListener=function(){o.move((parseInt(o.documentBody.get("scrollWidth"))-520)/2,(window.innerHeight-440)/2)},o.drawRect(520,440,"#000000"),o.move(0,0),o.documentBody=new i(document.body),o.documentBody.params({"css.fontFamily":'"", "Meiryo", " Pro W3", "Hiragino Kaku Gothic Pro", " ", sans-serif',"css.backgroundColor":"#000000"}),o.stage=new ht,o.stage.addEventListener(t.COMPLETE,o.stageLoadCompleteListener),o.timer=new p(100,0),o.timer.addEventListener(t.TIMER,o.timerListener),o.text=new i("label"),o.text.params({"css.width":"81px","css.color":"#FFFFFF","css.fontSize":"15px","css.textAlign":"center",innerHTML:"Loading ..."}),o.text.move(220,265);for(var n=0;n<4;n++){var r=new l("assets/images/loading_"+(n+1)+".png");r.move(220,180),o.images.push(r)}return o.loader=new s(o.images),o.loader.addEventListener(t.COMPLETE,o.loadCompleteListener),o.loader.load(),o.move((parseInt(o.documentBody.get("scrollWidth"))-520)/2,(window.innerHeight-440)/2),window.addEventListener(t.RESIZE,o.windowResizeListener),o}return ut(o,e),o}(i))})();